<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Login</title>
</head>
<body>
    <header>
        <h1>Taylor's World ğŸŒ</h1>
        <p>Not just albums â€” chapters of a life in lyrics. ğŸ“–âœ¨</p>
    </header>
    <nav>
        <ul>
            <li><a href="index.html">Swiftie Hub ğŸ </a></li>
            <li><a href="login.html">Join the Era ğŸšª</a></li>
            <li><a href="registration.html">Become a Swiftie ğŸ’–</a></li>
            <li><a href="feedback.html">Share Your Story ğŸ“</a></li>
        </ul>
    </nav>

    <div class="mobile-controls" aria-hidden="false">
        <details class="mobile-detail nav-detail">
            <summary class="mobile-btn">Menu ğŸ“±</summary>
            <ul class="mobile-menu">
                <li><a href="index.html">Swiftie Hub ğŸ </a></li>
                <li><a href="login.html">Join the Era ğŸšª</a></li>
                <li><a href="registration.html">Become a Swiftie ğŸ’–</a></li>
                <li><a href="feedback.html">Share Your Story ğŸ“</a></li>
                <li><a href="thankyou.html">Thank You ğŸ™</a></li>
            </ul>
        </details>
    </div>

    <h2>Login ğŸ”</h2>
    <form id="loginForm" method="post">
        <fieldset>
            <label for="login">Username ğŸ‘¤</label>
            <input type="text" id="login" name="login" placeholder="Taylor Swift"> <br>
            <label for="password">Password ğŸ”‘</label>
            <input type="password" id="password" name="password" placeholder="Secret era"> <br>
            <input type="checkbox" id="stayloggedin" name="stayloggedin">
            <label for="stayloggedin">Stay logged in âœ…</label>
        </fieldset> <br>
        <button type="button">Sign In ğŸš€</button>
    </form>
    <footer>
        <p>Music ğŸ¶, magic âœ¨, and a little bit of Swiftiness included. ğŸ’–</p>
        <p>Â© 2025 | Developed by 3rd-year Applied Linguistics student Mykhailo Babilia. ğŸ“</p>
    </footer>
    <script>
      const scriptURL = 'https://script.google.com/macros/s/AKfycbzNh53uv30g9lJcBhXpTx37Ln-7ePgi3yScC1i1jfPZM8gQVR919blHO6ej-nyStngDhg/exec'; // Ğ—Ğ°Ğ¼Ñ–Ğ½Ğ¸ Ğ½Ğ° Ñ‚Ğ²Ñ–Ğ¹ Web App URL
      const form = document.getElementById('loginForm');
      const button = form.querySelector('button[type="button"]');

      button.addEventListener('click', async (e) => {
        e.preventDefault();
        const formData = new FormData(form);
        const data = {
          sheet: 'Login',
          login: formData.get('login') || '',
          password: formData.get('password') || '',
          stayloggedin: formData.get('stayloggedin') ? 'Yes' : 'No'
        };

        console.log('Sending data:', data); // Ğ”ĞµĞ±Ğ°Ğ³

        try {
          const response = await fetch(scriptURL, {
            method: 'POST',
            body: new URLSearchParams(data),
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
          });
          const result = await response.json();
          if (result.result === 'success') {
            window.location.href = 'thankyou.html';
          } else {
            console.error('Server error:', result.error);
            alert('ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸: ' + result.error);
          }
        } catch (error) {
          console.error('Client error:', error);
          alert('ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: ' + error.message);
        }
      });
    </script>
</body>
</html>